/*!
 * ERSS SAYING
 * (c) 2020-2023 Xhemj
 * Build: 2023-3-4 11:45:11
 * Version: 3.1.1
 * ====
 * o(〃＾▽＾〃)o
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([["MYStar-21833f8f"],{"1ec4c":function(t,e,n){"use strict";n("5a94")},"2e83":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("8300");var a=n("1b2a"),r=n("9944");Object(r.i)("https://recaptcha.net/recaptcha/api.js?onload=grecaptchaready&render=6LdOb_gaAAAAAAIQpvSd_6a5yjeneoVlvM159zwH",{async:!0,defer:!0});var c=!1;window.grecaptchaready=function(){Object(r.j)("人机验证（reCaptcha）加载成功！"),c=!0};var i=function(t){return t=t||"addstar",new Promise((function(e,n){c||n("人机验证正在加载中，请稍后再试"),window.grecaptcha.execute(a.h,{action:t}).then((function(t){e(t)})).catch((function(t){n(t)}))}))}},"5a94":function(t,e,n){},c9fa:function(t,e,n){},cb95:function(t,e,n){"use strict";n.r(e);n("5ab0");var a=n("9944"),r=n("1b2a"),c=n("f561");n("8300"),n("ea5b"),n("e551");window.mtcaptchaConfig={sitekey:r.f,theme:"neowhite",lang:"zh",customLangText:{zh:{loading:"加载中……",verifying:"验证中……"}},"jsloaded-callback":"mtcaptchaready",render:"explicit",renderQueue:[]};var i=!1;window.mtcaptchaready=function(){i=!0},Promise.all([Object(a.i)("https://service.mtcaptcha.com/mtcv1/client/mtcaptcha.min.js"),Object(a.i)("https://service2.mtcaptcha.com/mtcv1/client/mtcaptcha2.min.js")]).then((function(){Object(a.j)("人机验证（mtCaptcha）加载成功！"),i=!0}));var o=n("d633"),s={name:"MYStar",props:{mingyan:String},data:function(){return{starEvent:"addstar",loadingHtml:'\n    \x3c!-- 点赞 --\x3e\n    <i class="mdui-icon material-icons" id="star-logo" style="cursor: pointer;">&#xe8dc;</i>\n    <span class="my--star-num">\n    \x3c!-- 加载动画 --\x3e\n  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto;background: none;shape-rendering: auto;position: relative;transform: translateY(5px);" width="15px" height="15px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">\n    <circle cx="50" cy="50" fill="none" stroke="rgba(0,0,0,.65)" stroke-width="10" r="35" stroke-dasharray="164.93361431346415 56.97787143782138">\n      <animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="0.75s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform>\n    </circle>\n  \x3c!-- https://loading.io/ --\x3e</svg>\n    </span>\n    '}},mounted:function(){window.addEventListener("hashchange",(function(){this.starEvent="addstar"}))},created:function(){this.doStar=this.star},methods:{isSwalShow:function(){return Object(a.f)(".swal-overlay--show-modal")},turnRed:function(){return Object(a.m)("#star-logo").style.color="red"},turnGray:function(){return Object(a.m)("#star-logo").style.color="#000000A3"},star:function(t,e,n){Object(o.a)(o.b.clickMYStarButton);var c=this;if(Object(a.j)(this.mingyan),!this.isSwalShow())switch(Object(a.o)({title:Object(a.m)(".my--mingyan-text").innerText,text:"加载出错了？刷新试试？",icon:r.a,button:"关闭"}).then((function(){c.starEvent="addstar",document.removeEventListener("click",c.doStar)})),Object(a.m)(".swal-icon.swal-icon--custom>img").style.maxWidth="150px",Object(a.m)(".swal-text").innerHTML=this.loadingHtml,document.querySelector("#star-logo").addEventListener("click",(function(){c.doStar()})),this.turnGray(),this.starEvent){case"addstar":this.addStar(t,e,n);break;case"removestar":this.removeStar(t,e,n)}},addStar:function(t,e,n){Object(a.j)(t);var r=this;r.turnGray(),c.a.addStar(t,e,n).then((function(t){if(0!=t.code){if(a.a.err(t.msg),Object(a.m)(".my--star-num").innerHTML=t.data.starNum,t.data.isStar&&(r.turnRed(),r.starEvent="removestar"),-1!==t.msg.indexOf("人机验证")||Object(a.l)("captcha"))return r.reVerify("addstar")}else a.a.su(t.msg),Object(a.m)(".my--star-num").innerHTML=t.data.starNum,t.data.isStar&&(r.turnRed(),r.starEvent="removestar")})).catch((function(t){a.a.err("错误：\n"+t)}))},removeStar:function(t,e,n){var r=this;r.turnGray(),c.a.removeStar(t,e,n).then((function(t){if(0!=t.code){if(a.a.err(t.msg),Object(a.m)(".my--star-num").innerHTML=t.data.starNum,t.data.isStar||(r.turnGray(),r.starEvent="addstar"),-1!==t.msg.indexOf("人机验证")||Object(a.l)("captcha"))return r.reVerify("removestar")}else a.a.su(t.msg),Object(a.m)(".my--star-num").innerHTML=t.data.starNum,t.data.isStar||(r.turnGray(),r.starEvent="addstar")})).catch((function(t){a.a.err("错误：\n"+t)}))},reVerify:function(t){var e,n,r=this;Object(a.o)({title:"感谢您对耳斯名言的支持，但为了防止恶意刷赞行为，我们不得不对您的身份进行验证。若您多次收到验证提示，建议您稍后再试。",text:"加载中……",icon:"",button:"继续"}).then((function(){var e=window.mtcaptcha.getVerifiedToken();return e?(r.starEvent=t,r.star(null,null,"reverify_mtcaptcha@"+e)):a.a.err("验证失败：请重试")})),Object(a.m)(".swal-title").style.fontSize="20px",Object(a.m)(".swal-text").innerHTML="验证码加载中……",Object(a.m)(".swal-text").id="star-reverify",Object(a.m)("#star-reverify").style.margin="-30px",e="star-reverify",n=(n="addstar")||"addstar",new Promise((function(t,a){i||a("人机验证正在加载中，请稍后再试"),window.mtcaptchaConfig.action=n,window.mtcaptchaConfig.renderQueue.push(e),t()}))}}},u=(n("e1f9"),n("1ec4c"),n("cba8")),m=Object(u.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{staticClass:"my--star-btn label label-rounded label-warning",on:{click:function(e){return t.doStar()}}},[n("i",{staticClass:"mdui-icon material-icons",staticStyle:{"font-size":"15px"}},[t._v("")]),t._v("  点赞")])}),[],!1,null,"16e78c0a",null);e.default=m.exports},e1f9:function(t,e,n){"use strict";n("c9fa")},f561:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var a,r,c=n("291b"),i=n("b49e"),o=(n("e186"),n("8300"),n("041f"),n("7141"),n("83df"),n("7cc5"),n("654b"),n("1b2a")),s=n("d633"),u=n("9944"),m=n("2e83"),f=o.b.star_v3,d={getNum:function(t){if(Promise)return t||(t=Object(u.m)(".my--mingyan-name").innerText.trim()+"："+Object(u.m)(".my--mingyan-text").innerText.trim()),new Promise((function(e,n){fetch(f,Object(i.a)(Object(i.a)({},o.g),{},{body:JSON.stringify({event:"getnum",data:{MY_text:t,MY_token:Object(u.e)(),t:(new Date).getTime()}})})).then((function(t){return t.json()})).then((function(t){e(t)})).catch((function(t){n(t)}))}))},addStar:(r=Object(c.a)(regeneratorRuntime.mark((function t(e,n,a){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Promise){t.next=2;break}return t.abrupt("return");case 2:if(e||n||(e=Object(u.m)(".my--mingyan-name").innerText.trim()+"："+Object(u.m)(".my--mingyan-text").innerText.trim()),r={},n&&e&&(r={MY_text:e}),n&&!e&&(r={MY_ID:n}),!n&&e&&(r={MY_text:e}),t.prev=7,t.t0=a,t.t0){t.next=13;break}return t.next=12,Object(m.a)();case 12:t.t0=t.sent;case 13:return a=t.t0,t.abrupt("return",new Promise((function(t,e){fetch(f,Object(i.a)(Object(i.a)({},o.g),{},{body:JSON.stringify({event:"addstar",data:Object(i.a)(Object(i.a)({},r),{},{MY_token:Object(u.e)(),re_token:a,t:(new Date).getTime()})})})).then((function(t){return t.json()})).then((function(e){t(e),0===e.code&&Object(s.a)(s.b.addStarEvent)})).catch((function(t){e(t)}))})));case 17:t.prev=17,t.t1=t.catch(7),u.a.err("点赞失败："+t.t1);case 20:case"end":return t.stop()}}),t,null,[[7,17]])}))),function(t,e,n){return r.apply(this,arguments)}),removeStar:(a=Object(c.a)(regeneratorRuntime.mark((function t(e,n,a){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Promise){t.next=2;break}return t.abrupt("return");case 2:if(e||(e=Object(u.m)(".my--mingyan-name").innerText.trim()+"："+Object(u.m)(".my--mingyan-text").innerText.trim()),n=n||"",t.prev=4,t.t0=a,t.t0){t.next=10;break}return t.next=9,Object(m.a)();case 9:t.t0=t.sent;case 10:return a=t.t0,t.abrupt("return",new Promise((function(t,n){fetch(f,Object(i.a)(Object(i.a)({},o.g),{},{body:JSON.stringify({event:"removestar",data:{MY_text:e,MY_token:Object(u.e)(),re_token:a,t:(new Date).getTime()}})})).then((function(t){return t.json()})).then((function(e){t(e),0===e.code&&Object(s.a)(s.b.removeStarEvent)})).catch((function(t){n(t)}))})));case 14:t.prev=14,t.t1=t.catch(4),u.a.err("点赞失败："+t.t1);case 17:case"end":return t.stop()}}),t,null,[[4,14]])}))),function(t,e,n){return a.apply(this,arguments)}),getRanking:function(t){if(Promise)return new Promise((function(e,n){fetch(f,Object(i.a)(Object(i.a)({},o.g),{},{body:JSON.stringify({event:"ranking",data:{t:(new Date).getTime(),source:t}})})).then((function(t){return t.json()})).then((function(t){e(t),Object(s.a)(s.b.getCurrentRanking)})).catch((function(t){n(t)}))}))},getHistoryRanking:function(t){if(Promise)return new Promise((function(e,n){setTimeout((function(){n("请求超时")}),2e3),fetch("".concat(o.b.ranking_history,"?t=_").concat((new Date).getTime(),"&source=").concat(t)).then((function(t){return t.json()})).then((function(t){Object(u.j)(t),"请求成功"==t.msg&&(e(t.data),Object(s.a)(s.b.getHistoryRanking)),n(t.msg)}))}))},update:function(t,e){if(Promise){t||e||(t=Object(u.m)(".my--mingyan-name").innerText.trim()+"："+Object(u.m)(".my--mingyan-text").innerText.trim());var n={};return e&&t&&(n={MY_text:t}),e&&!t&&(n={MY_ID:e}),!e&&t&&(n={MY_text:t}),new Promise((function(t,e){fetch(f,Object(i.a)(Object(i.a)({},o.g),{},{body:JSON.stringify({event:"update",data:Object(i.a)(Object(i.a)({},n),{},{MY_token:Object(u.e)(),t:(new Date).getTime()})})})).then((function(t){return t.json()})).then((function(e){t(e)})).catch((function(t){e(t)}))}))}}}}}]);