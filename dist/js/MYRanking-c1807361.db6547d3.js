/*!
 * ERSS SAYING
 * (c) 2020-2022 Xhemj
 * Build: 2022-5-15 20:17:13
 * Version: 3.1.1
 * ====
 * o(〃＾▽＾〃)o
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([["MYRanking-c1807361"],{"2e83":function(t,n,e){"use strict";e.d(n,"a",(function(){return c}));e("8300");var a=e("1b2a"),r=e("9944");Object(r.i)("https://recaptcha.net/recaptcha/api.js?onload=grecaptchaready&render=6LdOb_gaAAAAAAIQpvSd_6a5yjeneoVlvM159zwH",{async:!0,defer:!0});var i=!1;window.grecaptchaready=function(){Object(r.j)("人机验证（reCaptcha）加载成功！"),i=!0};var c=function(t){return t=t||"addstar",new Promise((function(n,e){i||e("人机验证正在加载中，请稍后再试"),window.grecaptcha.execute(a.h,{action:t}).then((function(t){n(t)})).catch((function(t){e(t)}))}))}},4924:function(t,n,e){"use strict";e("a6e8")},a050:function(t,n,e){"use strict";e.r(n);var a=e("f561"),r=e("9944"),i=e("7cc4"),c={name:"MYRanking",data:function(){return{isFinishLoading:!1,rankingData:[]}},computed:{width:function(){return Object(r.c)()?[4,14,6]:[4,16,4]}},mounted:function(){Object(r.d)(".my--ranking"),this.getRankingData()},methods:{getRankingData:function(){var t=this;a.a.getRanking(window.my_cfg.source).then((function(n){t.rankingData=n.data,t.isFinishLoading=!0}))},findMingyan:function(t){for(var n in i.d)if(i.d[n]===t)return n;return 0}}},o=(e("4924"),e("cba8")),s=Object(o.a)(c,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"my--ranking"},[t.isFinishLoading?e("div",{staticClass:"my--ranking-finish-loading"},[e("h1",{staticStyle:{"text-align":"center"}},[t._v("排行榜")]),t._l(t.rankingData,(function(n,a){return e("a-row",{key:a+n,staticClass:"my--ranking-item"},[e("a-col",{attrs:{span:t.width[0],id:"star-ranking-num"}},[e("router-link",{attrs:{to:"/@"+t.findMingyan(n.text)}},[t._v(" "+t._s(new Number(a)+1)+" ")])],1),e("a-col",{staticClass:"my--star-ranking-text",attrs:{span:t.width[1],id:"star-ranking-text"}},[e("router-link",{attrs:{to:"/@"+t.findMingyan(n.text)}},[t._v(" "+t._s(n.text)+" ")])],1),e("a-col",{attrs:{span:t.width[2]}},[e("router-link",{attrs:{to:"/@"+t.findMingyan(n.text)}},[e("i",{staticClass:"mdui-icon material-icons",staticStyle:{color:"rgba(0, 0, 0, 0.64)"},attrs:{id:"star-ranking-thumb"}},[t._v("")])]),e("span",{attrs:{id:"star-ranking-thumb-num"}},[e("router-link",{attrs:{to:"/@"+t.findMingyan(n.text)}},[t._v(" "+t._s(n.num)+" ")])],1)],1)],1)}))],2):e("div",{staticClass:"my--ranking-loading-tip"},[t._m(0),e("br")])])}),[function(){var t=this.$createElement,n=this._self._c||t;return n("strong",[n("div",[n("h1",[this._v("加载中……")])])])}],!1,null,"cba3290a",null);n.default=s.exports},a6e8:function(t,n,e){},f561:function(t,n,e){"use strict";e.d(n,"a",(function(){return g}));var a,r,i=e("291b"),c=e("b49e"),o=(e("e186"),e("8300"),e("041f"),e("7141"),e("83df"),e("7cc5"),e("654b"),e("1b2a")),s=e("d633"),u=e("9944"),f=e("2e83"),m=o.b.star_v3,g={getNum:function(t){if(Promise)return t||(t=Object(u.m)(".my--mingyan-name").innerText.trim()+"："+Object(u.m)(".my--mingyan-text").innerText.trim()),new Promise((function(n,e){fetch(m,Object(c.a)(Object(c.a)({},o.g),{},{body:JSON.stringify({event:"getnum",data:{MY_text:t,MY_token:Object(u.e)(),t:(new Date).getTime()}})})).then((function(t){return t.json()})).then((function(t){n(t)})).catch((function(t){e(t)}))}))},addStar:(r=Object(i.a)(regeneratorRuntime.mark((function t(n,e,a){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Promise){t.next=2;break}return t.abrupt("return");case 2:if(n||e||(n=Object(u.m)(".my--mingyan-name").innerText.trim()+"："+Object(u.m)(".my--mingyan-text").innerText.trim()),r={},e&&n&&(r={MY_text:n}),e&&!n&&(r={MY_ID:e}),!e&&n&&(r={MY_text:n}),t.prev=7,t.t0=a,t.t0){t.next=13;break}return t.next=12,Object(f.a)();case 12:t.t0=t.sent;case 13:return a=t.t0,t.abrupt("return",new Promise((function(t,n){fetch(m,Object(c.a)(Object(c.a)({},o.g),{},{body:JSON.stringify({event:"addstar",data:Object(c.a)(Object(c.a)({},r),{},{MY_token:Object(u.e)(),re_token:a,t:(new Date).getTime()})})})).then((function(t){return t.json()})).then((function(n){t(n),0===n.code&&Object(s.a)(s.b.addStarEvent)})).catch((function(t){n(t)}))})));case 17:t.prev=17,t.t1=t.catch(7),u.a.err("点赞失败："+t.t1);case 20:case"end":return t.stop()}}),t,null,[[7,17]])}))),function(t,n,e){return r.apply(this,arguments)}),removeStar:(a=Object(i.a)(regeneratorRuntime.mark((function t(n,e,a){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Promise){t.next=2;break}return t.abrupt("return");case 2:if(n||(n=Object(u.m)(".my--mingyan-name").innerText.trim()+"："+Object(u.m)(".my--mingyan-text").innerText.trim()),e=e||"",t.prev=4,t.t0=a,t.t0){t.next=10;break}return t.next=9,Object(f.a)();case 9:t.t0=t.sent;case 10:return a=t.t0,t.abrupt("return",new Promise((function(t,e){fetch(m,Object(c.a)(Object(c.a)({},o.g),{},{body:JSON.stringify({event:"removestar",data:{MY_text:n,MY_token:Object(u.e)(),re_token:a,t:(new Date).getTime()}})})).then((function(t){return t.json()})).then((function(n){t(n),0===n.code&&Object(s.a)(s.b.removeStarEvent)})).catch((function(t){e(t)}))})));case 14:t.prev=14,t.t1=t.catch(4),u.a.err("点赞失败："+t.t1);case 17:case"end":return t.stop()}}),t,null,[[4,14]])}))),function(t,n,e){return a.apply(this,arguments)}),getRanking:function(t){if(Promise)return new Promise((function(n,e){fetch(m,Object(c.a)(Object(c.a)({},o.g),{},{body:JSON.stringify({event:"ranking",data:{t:(new Date).getTime(),source:t}})})).then((function(t){return t.json()})).then((function(t){n(t),Object(s.a)(s.b.getCurrentRanking)})).catch((function(t){e(t)}))}))},getHistoryRanking:function(t){if(Promise)return new Promise((function(n,e){setTimeout((function(){e("请求超时")}),2e3),fetch("".concat(o.b.ranking_history,"?t=_").concat((new Date).getTime(),"&source=").concat(t)).then((function(t){return t.json()})).then((function(t){Object(u.j)(t),"请求成功"==t.msg&&(n(t.data),Object(s.a)(s.b.getHistoryRanking)),e(t.msg)}))}))},update:function(t,n){if(Promise){t||n||(t=Object(u.m)(".my--mingyan-name").innerText.trim()+"："+Object(u.m)(".my--mingyan-text").innerText.trim());var e={};return n&&t&&(e={MY_text:t}),n&&!t&&(e={MY_ID:n}),!n&&t&&(e={MY_text:t}),new Promise((function(t,n){fetch(m,Object(c.a)(Object(c.a)({},o.g),{},{body:JSON.stringify({event:"update",data:Object(c.a)(Object(c.a)({},e),{},{MY_token:Object(u.e)(),t:(new Date).getTime()})})})).then((function(t){return t.json()})).then((function(n){t(n)})).catch((function(t){n(t)}))}))}}}}}]);