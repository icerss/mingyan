/*!
 * ERSS SAYING
 * (c) 2020-2022 Xhemj
 * Build: 2022-3-20 13:36:51
 * Version: 3.1.1
 * ====
 * o(〃＾▽＾〃)o
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([["MYSearch"],{"048b":function(t,i,s){"use strict";s.r(i);var n=s("ccc5"),a=(s("2c45"),s("b0a9"),s("2ee7"),s("b101"),s("1860"),s("3903"),s("7cc4")),e=s("f561"),r=s("9944"),o={name:"MYSearch",components:{MYSearchHighlight:function(){return Promise.all([s.e("vendor-MYSearchHighlight"),s.e("MYSearchHighlight")]).then(s.bind(null,"4213"))}},data:function(){return{loadingSvg:'\x3c!-- 加载动画 --\x3e<svg xmlns="http://www.w3.org/2000/svg"xmlns:xlink="http://www.w3.org/1999/xlink"style="margin: auto;background: none;shape-rendering: auto;position: relative;transform: translateY(60px);"width="30px"height="30px"viewBox="0 0 100 100"preserveAspectRatio="xMidYMid"><circle cx="50"cy="50"fill="none"stroke="rgba(0,0,0,.65)"stroke-width="10"r="35"stroke-dasharray="164.93361431346415 56.97787143782138"><animateTransform attributeName="transform"type="rotate"repeatCount="indefinite"dur="0.75s"values="0 50 50;360 50 50"keyTimes="0;1"></animateTransform></circle>\x3c!-- https://loading.io/ --\x3e</svg>',mingyan:a.d,isStartInput:!1,inputValue:"",isLoadHitsory:!1,isLoading:!0,listMode:"ranking",historyListWidth:[4,16,4],historyDataList:[],displayLength:25,scrollEvent:null,isNoResult:!1}},watch:{inputValue:function(){this.inputValue?(this.handleSearch(),this.listMode="search"):this.listMode="ranking";var t,i="",s=Object(n.a)(this.displayMingyan);try{for(s.s();!(t=s.n()).done;){var a=t.value;a&&(i+=a)}}catch(t){s.e(t)}finally{s.f()}this.isNoResult=!i},historyDataList:function(){this.listMode="ranking",this.isLoadHitsory=!0}},mounted:function(){this.getHistoryRanking(),this.scrollEvent=window.addEventListener("scroll",this.handleScroll)},computed:{displayDataList:function(){return this.displayMingyan.filter((function(t,i){this.displayLength}))},displayMingyan:function(){var t=this;if(this.isStartInput){for(var i=this.mingyan.filter((function(i){if(-1!==i.toLocaleLowerCase().indexOf(t.inputValue.toLocaleLowerCase()))return i})),s=[],n=0;n<this.displayLength;n++)s.push(i[n]);return s}for(var e=[],r=0;r<this.displayLength;r++)e.push(a.d[r]);return e}},methods:{handleScroll:function(){document.body.clientHeight-window.scrollY-window.innerHeight<document.body.clientHeight/this.displayLength&&(this.displayLength<this.mingyan.length&&this.displayLength+10<this.mingyan.length?this.displayLength+=10:this.displayLength=this.mingyan.length)},handleSearch:function(){this.inputValue?this.isStartInput=!0:(this.isStartInput=!1,this.resultLength=0)},getHistoryRanking:function(){var t=this;e.a.getHistoryRanking(window.my_cfg.source).then((function(i){for(var s=[],n=i.length<15?i.length:15,a=0;a<n;a++)s.push(i[a]);t.historyDataList=s,t.isLoading=!1})).catch((function(i){Object(r.j)(i),e.a.getRanking().then((function(i){i=i.data;for(var s=[],n=0;n<15;n++)s.push(i[n]);t.historyDataList=s,t.isLoading=!1}))})),setTimeout((function(){!t.historyDataList===[]&&(t.isLoading=!1)}),2e3)},findMingyan:function(t){for(var i in a.d)if(a.d[i]===t)return i;return 0}}},l=(s("96c5"),s("cba8")),h=Object(l.a)(o,(function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"my--search"},[t.isLoading?t._e():s("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],staticClass:"my--search-bar",attrs:{type:"search",id:"searchbar",placeholder:"搜索……",results:"5"},domProps:{value:t.inputValue},on:{input:function(i){i.target.composing||(t.inputValue=i.target.value)}}}),"search"===t.listMode?s("div",{staticClass:"search-list"},t._l(t.displayMingyan,(function(i){return s("div",{key:i,staticClass:"search-item"},[t.isStartInput?s("router-link",{staticClass:"showall-item",attrs:{to:"/@"+t.findMingyan(i)}},[i?s("MYSearchHighlight",{attrs:{searchText:t.inputValue,text:i}}):t._e()],1):s("router-link",{staticClass:"showall-item",attrs:{to:"/@"+t.findMingyan(i)}},[t._v(" "+t._s(i)+" ")])],1)})),0):t._e(),"ranking"===t.listMode?s("div",{staticClass:"search-history-list"},[t.isLoadHitsory?s("div",{staticClass:"history-list"},[s("div",{staticClass:"search-history-list-tip"},[t._v("每日精选名言：")]),t._l(t.historyDataList,(function(i,n){return s("div",{key:i.text,staticClass:"search-history-item"},[s("a-row",[s("a-col",{attrs:{span:t.historyListWidth[0],id:"star-ranking-num"}},[s("router-link",{attrs:{to:"/@"+t.findMingyan(i.text)}},[t._v(" "+t._s(new Number(n)+1)+" ")])],1),s("a-col",{staticClass:"my--star-ranking-text",attrs:{span:t.historyListWidth[1],id:"star-ranking-text"}},[s("router-link",{attrs:{to:"/@"+t.findMingyan(i.text)}},[t._v(" "+t._s(i.text)+" ")])],1)],1)],1)}))],2):s("div",{staticClass:"history-loading-mask"},[s("span",{staticClass:"loading-svg",domProps:{innerHTML:t._s(t.loadingSvg)}}),s("h3",[t._v("搜索加载中……")])])]):t._e(),t.isNoResult?s("span",{staticClass:"my--search-no-result"},[t._v("无结果")]):t._e()])}),[],!1,null,"729ad662",null);i.default=h.exports},"7c37":function(t,i,s){},"96c5":function(t,i,s){"use strict";s("7c37")}}]);