(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["search"],{"048b":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"my--search-app"}},[n("div",{staticClass:"my--search"},[t.isLoading?t._e():n("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],staticClass:"my--search-bar",attrs:{type:"search",id:"searchbar",placeholder:"搜索……",results:"5"},domProps:{value:t.inputValue},on:{input:function(e){e.target.composing||(t.inputValue=e.target.value)}}}),"search"===t.listMode?n("div",{staticClass:"search-list"},t._l(t.displayMingyan,(function(e){return n("div",{key:e,staticClass:"search-item"},[t.isStarInput?n("a",{staticClass:"showall-item",attrs:{"data-text":e},on:{click:function(e){return t.historyItemClick(e)}}},[e?n("MYSearchHighlight",{attrs:{searchText:t.inputValue,text:e}}):t._e()],1):n("a",{staticClass:"showall-item",attrs:{"data-text":e},on:{click:function(e){return t.historyItemClick(e)}}},[t._v(" "+t._s(e)+" ")])])})),0):t._e(),"ranking"===t.listMode?n("div",{staticClass:"search-history-list"},[t.isLoadHitsory?n("div",{staticClass:"history-list"},[n("div",{staticClass:"search-history-list-tip"},[t._v("每日精选名言：")]),t._l(t.historyDataList,(function(e,i){return n("div",{key:e.text,staticClass:"search-history-item",on:{click:function(e){return t.historyItemClick(e)}}},[n("a-row",{attrs:{"data-text":e.text}},[n("a-col",{attrs:{span:t.historyListWidth[0],id:"star-ranking-num","data-text":e.text}},[t._v(" "+t._s(new Number(i)+1)+" ")]),n("a-col",{staticClass:"my--star-ranking-text",attrs:{span:t.historyListWidth[1],id:"star-ranking-text","data-text":e.text}},[t._v(" "+t._s(e.text)+" ")])],1)],1)}))],2):n("div",{staticClass:"history-loading-mask"},[n("span",{staticClass:"loading-svg",domProps:{innerHTML:t._s(t.loadingSvg)}}),n("h3",[t._v("搜索加载中……")])])]):t._e(),t.isNoResult?n("span",{staticClass:"my--search-no-result"},[t._v("无结果")]):t._e()]),n("MYFooter",{attrs:{mode:"back"}})],1)},r=[],a=n("6283"),s=(n("3f7e"),n("9b24"),n("2398"),n("7cc4")),c=n("a6b2"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"search-highlight",attrs:{"data-text":t.text},domProps:{innerHTML:t._s(t.handleSearch)}})},u=[],h=(n("1130"),n("2769"),n("c5ce"),n("0756"),{name:"MYSearchHighlight",props:{text:String,searchText:String},computed:{handleSearch:function(){var t=new RegExp(this.searchText,"ig");return this.text.replace(t,'<span class="label label-secondary" :data-text="'.concat(this.text,'">')+this.searchText+"</span>")}}}),l=h,d=n("4ac2"),f=Object(d["a"])(l,o,u,!1,null,null,null),g=f.exports,p=n("f561"),m=n("41cb"),y={name:"MYSearch",components:{MYSearchHighlight:g,MYFooter:c["a"]},data:function(){return{loadingSvg:'\x3c!-- 加载动画 --\x3e<svg xmlns="http://www.w3.org/2000/svg"xmlns:xlink="http://www.w3.org/1999/xlink"style="margin: auto;background: none;shape-rendering: auto;position: relative;transform: translateY(60px);"width="30px"height="30px"viewBox="0 0 100 100"preserveAspectRatio="xMidYMid"><circle cx="50"cy="50"fill="none"stroke="rgba(0,0,0,.65)"stroke-width="10"r="35"stroke-dasharray="164.93361431346415 56.97787143782138"><animateTransform attributeName="transform"type="rotate"repeatCount="indefinite"dur="0.75s"values="0 50 50;360 50 50"keyTimes="0;1"></animateTransform></circle>\x3c!-- https://loading.io/ --\x3e</svg>',mingyan:s["d"],isStarInput:!1,inputValue:"",isLoadHitsory:!1,isLoading:!0,listMode:"ranking",historyListWidth:[4,16,4],historyDataList:[],displayLength:25,scrollEvent:null,isNoResult:!1}},watch:{inputValue:function(){this.inputValue?(this.handleSearch(),this.listMode="search"):this.listMode="ranking";var t,e="",n=Object(a["a"])(this.displayMingyan);try{for(n.s();!(t=n.n()).done;){var i=t.value;i&&(e+=i)}}catch(r){n.e(r)}finally{n.f()}this.isNoResult=!e},historyDataList:function(){this.listMode="ranking",this.isLoadHitsory=!0}},mounted:function(){this.getHistoryRanking(),this.scrollEvent=window.addEventListener("scroll",this.handleScroll)},computed:{displayDataList:function(){return this.displayMingyan.filter((function(t,e){this.displayLength}))},displayMingyan:function(){var t=this;if(this.isStarInput){for(var e=this.mingyan.filter((function(e){if(-1!==e.toLocaleLowerCase().indexOf(t.inputValue.toLocaleLowerCase()))return e})),n=[],i=0;i<this.displayLength;i++)n.push(e[i]);return n}for(var r=[],a=0;a<this.displayLength;a++)r.push(s["d"][a]);return r}},methods:{handleScroll:function(){document.body.clientHeight-window.scrollY-window.innerHeight<document.body.clientHeight/this.displayLength&&(this.displayLength<this.mingyan.length&&this.displayLength+10<this.mingyan.length?this.displayLength+=10:this.displayLength=this.mingyan.length)},handleSearch:function(){this.inputValue?this.isStarInput=!0:(this.isStarInput=!1,this.resultLength=0)},getHistoryRanking:function(){var t=this;p["a"].getHistoryRanking().then((function(e){for(var n=[],i=0;i<15;i++)n.push(e[i]);t.historyDataList=n,t.isLoading=!1})),setTimeout((function(){!t.historyDataList===[]&&(t.isLoading=!1)}),2e3)},findMingyan:function(t){for(var e in s["d"])if(s["d"][e]===t)return e;return 0},historyItemClick:function(t){var e=t.path[0].getAttribute("data-text");m["a"].push("/@"+this.findMingyan(e))}}},v=y,x=(n("fe94"),Object(d["a"])(v,i,r,!1,null,"020bb58f",null));e["default"]=x.exports},1130:function(t,e,n){var i=n("cdcb"),r=n("b074"),a=n("7aeb"),s=n("d362"),c=n("429f"),o=n("3d27").f,u=n("a5e4").f,h=n("7cd8"),l=n("f91c"),d=n("4cee"),f=n("6c39"),g=n("d50e"),p=n("8801"),m=n("817b").enforce,y=n("d4b8"),v=n("9bc6"),x=n("3dc9"),b=n("2e4d"),w=v("match"),k=r.RegExp,_=k.prototype,S=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,O=/a/g,M=/a/g,j=new k(O)!==O,L=d.UNSUPPORTED_Y,T=i&&(!j||L||x||b||g((function(){return M[w]=!1,k(O)!=O||k(M)==M||"/a/i"!=k(O,"i")}))),C=function(t){for(var e,n=t.length,i=0,r="",a=!1;i<=n;i++)e=t.charAt(i),"\\"!==e?a||"."!==e?("["===e?a=!0:"]"===e&&(a=!1),r+=e):r+="[\\s\\S]":r+=e+t.charAt(++i);return r},Y=function(t){for(var e,n=t.length,i=0,r="",a=[],s={},c=!1,o=!1,u=0,h="";i<=n;i++){if(e=t.charAt(i),"\\"===e)e+=t.charAt(++i);else if("]"===e)c=!1;else if(!c)switch(!0){case"["===e:c=!0;break;case"("===e:S.test(t.slice(i+1))&&(i+=2,o=!0),r+=e,u++;continue;case">"===e&&o:if(""===h||p(s,h))throw new SyntaxError("Invalid capture group name");s[h]=!0,a.push([h,u]),o=!1,h="";continue}o?h+=e:r+=e}return[r,a]};if(a("RegExp",T)){for(var R=function(t,e){var n,i,r,a,o,u,d=this instanceof R,f=h(t),g=void 0===e,p=[],y=t;if(!d&&f&&g&&t.constructor===R)return t;if((f||t instanceof R)&&(t=t.source,g&&(e="flags"in y?y.flags:l.call(y))),t=void 0===t?"":String(t),e=void 0===e?"":String(e),y=t,x&&"dotAll"in O&&(i=!!e&&e.indexOf("s")>-1,i&&(e=e.replace(/s/g,""))),n=e,L&&"sticky"in O&&(r=!!e&&e.indexOf("y")>-1,r&&(e=e.replace(/y/g,""))),b&&(a=Y(t),t=a[0],p=a[1]),o=s(k(t,e),d?this:_,R),(i||r||p.length)&&(u=m(o),i&&(u.dotAll=!0,u.raw=R(C(t),n)),r&&(u.sticky=!0),p.length&&(u.groups=p)),t!==y)try{c(o,"source",""===y?"(?:)":y)}catch(v){}return o},P=function(t){t in R||o(R,t,{configurable:!0,get:function(){return k[t]},set:function(e){k[t]=e}})},H=u(k),D=0;H.length>D;)P(H[D++]);_.constructor=R,R.prototype=_,f(r,"RegExp",R)}y("RegExp")},"675b":function(t,e,n){},d362:function(t,e,n){var i=n("0f4e"),r=n("5ee6");t.exports=function(t,e,n){var a,s;return r&&"function"==typeof(a=e.constructor)&&a!==n&&i(s=a.prototype)&&s!==n.prototype&&r(t,s),t}},f561:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n("99a5"),r=n("1c03"),a=(n("6a61"),n("b1fa"),n("57d2"),n("e3c1"),n("1b2a")),s=n("6a79");Object(s["k"])("https://recaptcha.net/recaptcha/api.js?onload=grecaptchaready&render=6LdOb_gaAAAAAAIQpvSd_6a5yjeneoVlvM159zwH",{async:!0,defer:!0});var c=!1,o=function(){Object(s["l"])("[点赞系统 v2.1] 人机验证加载成功！"),c=!0};window["grecaptchaready"]=o;var u=function(){return new Promise((function(t,e){c||e("人机验证正在加载中，请稍后再试"),window.grecaptcha.execute(a["e"],{action:"addstar"}).then((function(e){t(e)}))}))},h=a["b"].star_v2,l={getNum:function(t){if(Promise)return t||(t=document.querySelector(".my--mingyan-name").innerText.trim()+"："+document.querySelector(".my--mingyan-text").innerText.trim()),new Promise((function(e,n){fetch(h,Object(r["a"])(Object(r["a"])({},a["c"]),{},{body:JSON.stringify({event:"getnum",data:{MY_text:t,MY_token:Object(s["f"])(),t:(new Date).getTime()}})})).then((function(t){return t.json()})).then((function(t){e(t)}))["catch"]((function(t){n(t)}))}))},addStar:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,n){var i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Promise){t.next=2;break}return t.abrupt("return");case 2:return e||n||(e=document.querySelector(".my--mingyan-name").innerText.trim()+"："+document.querySelector(".my--mingyan-text").innerText.trim()),i={},n&&e&&(i={MY_text:e}),n&&!e&&(i={MY_ID:n}),!n&&e&&(i={MY_text:e}),t.prev=7,t.next=10,u();case 10:return c=t.sent,t.abrupt("return",new Promise((function(t,e){fetch(h,Object(r["a"])(Object(r["a"])({},a["c"]),{},{body:JSON.stringify({event:"addstar",data:Object(r["a"])(Object(r["a"])({},i),{},{MY_token:Object(s["f"])(),re_token:c,t:(new Date).getTime()})})})).then((function(t){return t.json()})).then((function(e){t(e)}))["catch"]((function(t){e(t)}))})));case 14:t.prev=14,t.t0=t["catch"](7),s["a"].err("点赞失败："+t.t0);case 17:case"end":return t.stop()}}),t,null,[[7,14]])})));function e(e,n){return t.apply(this,arguments)}return e}(),removeStar:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Promise){t.next=2;break}return t.abrupt("return");case 2:return e||(e=document.querySelector(".my--mingyan-name").innerText.trim()+"："+document.querySelector(".my--mingyan-text").innerText.trim()),t.prev=3,t.next=6,u();case 6:return n=t.sent,t.abrupt("return",new Promise((function(t,i){fetch(h,Object(r["a"])(Object(r["a"])({},a["c"]),{},{body:JSON.stringify({event:"removestar",data:{MY_text:e,MY_token:Object(s["f"])(),re_token:n,t:(new Date).getTime()}})})).then((function(t){return t.json()})).then((function(e){t(e)}))["catch"]((function(t){i(t)}))})));case 10:t.prev=10,t.t0=t["catch"](3),s["a"].err("点赞失败："+t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));function e(e){return t.apply(this,arguments)}return e}(),getRanking:function(){if(Promise)return new Promise((function(t,e){fetch(h,Object(r["a"])(Object(r["a"])({},a["c"]),{},{body:JSON.stringify({event:"ranking",data:{t:(new Date).getTime()}})})).then((function(t){return t.json()})).then((function(e){t(e)}))["catch"]((function(t){e(t)}))}))},getHistoryRanking:function(){if(Promise)return new Promise((function(t,e){fetch("https://www.erssmy.com/api/get-ranking-history?_t="+(new Date).getTime()).then((function(t){return t.json()})).then((function(n){Object(s["l"])(n),"请求成功"==n.msg&&t(n.data),e(n.msg)}))}))},update:function(t,e){if(Promise){t||e||(t=document.querySelector(".my--mingyan-name").innerText.trim()+"："+document.querySelector(".my--mingyan-text").innerText.trim());var n={};return e&&t&&(n={MY_text:t}),e&&!t&&(n={MY_ID:e}),!e&&t&&(n={MY_text:t}),new Promise((function(t,e){fetch(h,Object(r["a"])(Object(r["a"])({},a["c"]),{},{body:JSON.stringify({event:"update",data:Object(r["a"])(Object(r["a"])({},n),{},{MY_token:Object(s["f"])(),t:(new Date).getTime()})})})).then((function(t){return t.json()})).then((function(e){t(e)}))["catch"]((function(t){e(t)}))}))}}}},fe94:function(t,e,n){"use strict";n("675b")}}]);