var my={};(function(t){t.version="2020/10/31";var _hmt=_hmt||[];!function(){var a=document.createElement("script");a.src="https://hm.baidu.com/hm.js?0673dbbe4e6ea51a92a74e3ba2bc051b";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(a,e)}(),"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("./src/sw.js")}));var ua=new Browser;if($(".app").html('\n    <div id="header"><div class="container"></div></div>\n    <div id="main" class="main"><h3><span id="name" class="label wave">有一位老师</span><span>曾经说过</span>：</h3><h1><strong><span id="mingyan" class="label label-secondary">加载中~~</span></strong></h1><p id="info"></p></br></br></br></div><div id="showall"></div>\n    <div id="md"></div>\n    <footer></footer>\n    '),"Mobile"!=ua.device)var header_text='\n        <a class="left" href="./" one-link-mark="yes">ERSS 名言</a>\n        <div class="right">\n            <a class="aline" href="./">主&nbsp;&nbsp;页</a>\n            <a class="aline" href="javascript:;" onclick="my.all()">名言搜索</a>\n            <a class="aline" href="javascript:;" onclick="my.more()">更多</a>\n        </div>\n        ',footer_text="<div>当前名言数量：999+</br>&copy"+(new Date).getFullYear()+" ERSS</div>";else var header_text='\n            <a class="left" href="/" one-link-mark="yes">ERSS 名言</a>\n            <div class="right"></div>\n        ',footer_text='\n            <div>当前名言数量：999+</br>\n            <a class="aline" href="./">主&nbsp;&nbsp;页</a>&nbsp;&nbsp;|&nbsp;&nbsp;\n            <a class="aline" href="javascript:;" onclick="my.all()">名言搜索</a>&nbsp;&nbsp;|&nbsp;&nbsp;\n            <a class="aline" href="javascript:;" onclick="my.more()">更多</a>\n            </div>\n        ';var footer=footer_text.replace("999+",mingyan.length);if($("#md").hide(),$("#showall").hide(),$("footer").html(footer),$("#header .container").html(header_text),qs=function(a){var e=location.href;e=e.replace("?","?&").split("&");var n="";for(i=1;i<e.length;i++)0==e[i].indexOf(a+"=")&&(n=e[i].replace(a+"=",""));return n},rdNum=function(a,e){switch(arguments.length){case 1:return parseInt(Math.random()*a+1,10);case 2:return parseInt(Math.random()*(e-a+1)+a,10);default:return 0}},$("h1").fontFlex(30,50,70),$("h3").fontFlex(30,50,70),t.pic_list=["虾扯蛋"],t.lazypic="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBzdHlsZT0ibWFyZ2luOiBhdXRvOyBiYWNrZ3JvdW5kOiByZ2IoMjU1LCAyNTUsIDI1NSk7IGRpc3BsYXk6IGJsb2NrOyBzaGFwZS1yZW5kZXJpbmc6IGF1dG87IiB3aWR0aD0iMjAwcHgiIGhlaWdodD0iMjAwcHgiIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCI+PHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjOWI0ZGNhIiBzdHJva2Utd2lkdGg9IjgiIHN0cm9rZS1kYXNoYXJyYXk9IjQyLjc2NDgyMTM3MDQ0MjcxIDQyLjc2NDgyMTM3MDQ0MjcxIiBkPSJNMjQuMyAzMEMxMS40IDMwIDUgNDMuMyA1IDUwczYuNCAyMCAxOS4zIDIwYzE5LjMgMCAzMi4xLTQwIDUxLjQtNDAgQzg4LjYgMzAgOTUgNDMuMyA5NSA1MHMtNi40IDIwLTE5LjMgMjBDNTYuNCA3MCA0My42IDMwIDI0LjMgMzB6IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0eWxlPSJ0cmFuc2Zvcm06c2NhbGUoMC44KTt0cmFuc2Zvcm0tb3JpZ2luOjUwcHggNTBweCI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ic3Ryb2tlLWRhc2hvZmZzZXQiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjFzIiBrZXlUaW1lcz0iMDsxIiB2YWx1ZXM9IjA7MjU2LjU4ODkyODIyMjY1NjI1Ij48L2FuaW1hdGU+PC9wYXRoPg0KPCEtLSBbbGRpb10gZ2VuZXJhdGVkIGJ5IGh0dHBzOi8vbG9hZGluZy5pby8gLS0+PC9zdmc+",t.pic=function(a){if(-1!=a.indexOf(t.pic_list)){if(console.log("ok"),"虾扯蛋"==a)var e="https://xhemj.coding.net/api/share/download/5642985d-4d3d-40e8-8196-686744cb84f8";return t.PicMobie(),a+'</br><img src="'+t.lazypic+'" data-src="'+e+'" class="mypic lazyload"></img>'}return a},t.print=function(){t.all();var a=document.body.innerHTML;document.getElementById("searchbar").style.display="none";var e=document.getElementById("showall").innerHTML.replace(/<a /g,"<span ").replace(/<\/a>/g,"</span>"),n=window.open("","","toolbar=no,scrollbars=yes,menubar=no");n.document.body.innerHTML="<title>名言 | ERSS</title>"+document.head.innerHTML+e+"</body></html>",n.print(),document.getElementById("searchbar").style.display="block",n.close(),window.document.body.innerHTML=a,location.reload()},t.download=function(){t.dfile("名言列表（"+t.version+"）",mingyan.join("\n"))},t.dfile=function(a,e){const n=document.createElement("a"),t=new Blob([e]);n.download=a,n.style="display: none",n.href=URL.createObjectURL(t),document.body.appendChild(n),n.click(),setTimeout((function(){document.body.removeChild(n),window.URL.revokeObjectURL(t)}),100)},$(document).keypress((function(a){var e=a.keyCode?a.keyCode:a.which;"13"!=e&&"32"!=e||t.reload()})),t.show=function(){try{if($("#md").hide(),$("#main").hide(),0!=mingyan.length){if(console.info("加载名言列表成功"),""!=qs("id"))var a=qs("id");else if(""!=location.hash&&"#search"!=location.hash)a=location.hash.replace("#","");else a=rdNum(0,mingyan.length-1);var e=mingyan[a].split("：")[0];if(2==mingyan[a].split("：").length)var n=mingyan[a].split("：")[1];else if(3==mingyan[a].split("：").length){n=mingyan[a].split("：")[1]+"："+mingyan[a].split("：")[2];console.log(n)}console.info("已选取第"+a+"条名言："+n),$("p#info").html('<div class="info-text"><a href="//'+location.hostname+location.pathname+"#"+a+'" class="label label-rounded label-warning">#'+a+'</a></br><a href="javascript:;" onclick="my.reload()">点击</a>查看更多名言</div>'),$("span#mingyan").html(t.pic(n)),$("span#name").text(e),$("#main").fadeIn();var i="名言 | "+n;document.title=i;var l=e+"曾经说过："+n;$('meta[name="description"]').attr("content",l),$('meta[property="og:description"]').attr("content",l),$('meta[name="og:description"]').attr("content",l),$('meta[property="og:title"]').attr("content",i),$('meta[name="og:title"]').attr("content",i)}}catch(a){console.error(a),console.error("名言加载失败"),$("#mingyan").text("名言加载失败"),$("#info").html("错误信息：</br>"+a+'</br>建议：<a href="javascript:my.reload()">点我刷新页面</a>'),$("#main").fadeIn(),$("#info").fadeIn()}},"Mobile"!=ua.device){var inputbar_width="60%";$("#main").css("transform","translateY(15%)")}else{var inputbar_width="auto";$("#main").css("transform","translateY(30%)"),$("#md").css("transform","translateY(50px)")}t.PicMobie=function(){"Mobile"==ua.device&&$("#main").css("transform","translateY(15%)")},t.reload=function(){""!=location.hash?location.href="//"+location.hostname+":"+location.port+location.pathname:""==qs("id")&&""==qs("mail")||(location.href="//"+location.hostname+":"+location.port+location.pathname),t.show()},t.hide_showall=function(){$("#md").hide(),$("#showall").hide(),$("#main").fadeIn(),$("footer").html(footer),"#search"==location.hash&&(location.href="#")},t.all=function(){$("#md").hide(),$("#main").hide(),$("input#searchbar").val("");var a='<input style="'+inputbar_width+'" type="search" id="searchbar" placeholder="搜索……" results="5"></input></br><span class="e"></span>';for(i=0;i<mingyan.length;i++)a+='<div><a style="color:black" id="showall_item" class="'+i+'" href="./?id='+i+'">'+mingyan[i]+"</a></div>";a+="</br></br></br>",$("#showall").html(a),$("#showall").fadeIn(),$("footer").html("当前名言数量："+mingyan.length+'</br><a class="aline" href=javascript:; onclick="my.hide_showall()">返回</a>')},t.md=function(a,e){$.get(e,(function(e){marked.setOptions({breaks:!0});var n=marked(e);n=n.replace(/<a /g,'<a target="_blank" '),$(a).html("<strong>"+n+"</strong></br></br></br></br>"),$(a).fadeIn()}))},t.more=function(){$("#main").hide(),$("#showall").hide(),$("#md").html('\n        <strong>\n        <div style="text-align: center">\n        <style>h1{font-size:30px}h3{font-size:20px}</style>\n        <h1>更多</h1>\n            <h3><a href="javascript:;" onclick="my.md_all()">查看全部名言</a></h3> \n            <h3><a href="javascript:;" onclick="my.print()">打印名言列表</a></h3> \n            <h3><a href="javascript:;" onclick="my.download()">下载名言列表（.txt）</a></h3> \n            <h3><a href="javascript:;" onclick="my.about()">关于</a></h3> \n            </div></div></strong>\n        '),$("footer").html("当前名言数量："+mingyan.length+'</br><a class="aline" href=javascript:; onclick="my.hide_showall()">返回</a>'),$("#md").fadeIn()},t.about=function(){$("#md").hide(),$("#main").hide(),$("#showall").hide(),t.md("#md","./src/md/about.md"),$("#md").fadeIn(),$("footer").html("当前名言数量："+mingyan.length+'</br><a class="aline" href=javascript:; onclick="my.hide_showall()">返回</a>')},t.md_all=function(){$("#md").hide(),$("#main").hide(),$("#showall").hide();var a="";for(i=0;i<mingyan.length;i++)a+=mingyan[i]+"</br>";a+="</br></br></br></br>",$("#md").html(marked(a)),$("#md").fadeIn()},t.search=function(){if($("#searchbar").is(":focus"))if($("input#searchbar").val()){var now1=$("input#searchbar").val(),now2=$("input#searchbar").val();now1==now2&&($("a#showall_item").each((function(){if(-1!=$(this).text().indexOf($("input#searchbar").val())){var reg="/"+$("input#searchbar").val()+"/g";$(this).html($(this).text().replace(eval(reg),'<span class="label label-secondary">'+$("input#searchbar").val()+"</span>")),$(this).show()}else $(this).hide()})),$(".e").hide())}else $("a#showall_item").show(),$("a#showall_item").each((function(){$(this).html($(this).html().replace('<span class="label label-secondary">',"")),$(this).html($(this).html().replace("</span>",""))}));null!=$("#showall")[0].innerText.match(/^\s*$/)?($(".e").text("无结果"),$(".e").show()):$("#searchbar").is(":focus")&&$(".e").hide()},setInterval(t.search,100),qs("mail")&&(window.open("mailto:"+qs("mail").replace("---","@")),t.reload()),t.show(),lazyload()})(my);
