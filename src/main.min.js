my={},function(t){t.version="2020/11/07";var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?0673dbbe4e6ea51a92a74e3ba2bc051b";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("./src/sw.js")}));var ua=new Browser,footer=$("footer").html().replace("999+",mingyan.length);if($("#md").hide(),$("#showall").hide(),$("footer").html(footer),qs=function(e){var t=location.href;t=t.replace("?","?&").split("&");var a="";for(i=1;i<t.length;i++)0==t[i].indexOf(e+"=")&&(a=t[i].replace(e+"=",""));return a},rdNum=function(e,t){switch(arguments.length){case 1:return parseInt(Math.random()*e+1,10);case 2:return parseInt(Math.random()*(t-e+1)+e,10);default:return 0}},$("h1").fontFlex(30,50,70),$("h3").fontFlex(30,50,70),t.lazypic="./src/loading.svg",t.pic=function(e){var a=e.split("：")[0];if("虾扯蛋"==(e=e.split("：")[1])||"解"==e){if("虾扯蛋"==e)var n="https://s-sh-1943-pic1.oss.dogecdn.com/2020/10/16/TQ3i5EH2wD9KF6d.jpg";if("解"==e)n={"老王":"https://s-sh-1943-pic1.oss.dogecdn.com/2020/11/01/KPVwxYQXM2fLODN.jpg","潘哥":"https://s-sh-1943-pic1.oss.dogecdn.com/2020/11/01/iTkIWzwKaL92otl.jpg","老朱":"https://s-sh-1943-pic1.oss.dogecdn.com/2020/11/01/xvUdlJW8XG1zbeZ.jpg","老俞":"https://s-sh-1943-pic1.oss.dogecdn.com/2020/11/01/lURnTwHouGbM8B7.jpg"}[a];return t.PicMobie(),lazyload(),e+'</br><img src="'+t.lazypic+'" data-src="'+n+'" class="mypic lazyload mdui-hoverable"></img>'}return lazyload(),e},t.print=function(){t.all();var e=document.body.innerHTML;document.getElementById("searchbar").style.display="none";var a=document.getElementById("showall").innerHTML.replace(/<a /g,"<span ").replace(/<\/a>/g,"</span>"),n=window.open("","","toolbar=no,scrollbars=yes,menubar=no");n.document.body.innerHTML="<title>名言 | ERSS</title>"+document.head.innerHTML+a+"</body></html>",n.print(),document.getElementById("searchbar").style.display="block",n.close(),window.document.body.innerHTML=e,location.reload()},t.download=function(){t.dfile("名言列表（"+t.version+"）",mingyan.join("\n"))},t.dfile=function(e,t){const a=document.createElement("a"),n=new Blob([t]);a.download=e,a.style="display: none",a.href=URL.createObjectURL(n),document.body.appendChild(a),a.click(),setTimeout((function(){document.body.removeChild(a),window.URL.revokeObjectURL(n)}),100)},$(document).keypress((function(e){var a=e.keyCode?e.keyCode:e.which;"13"!=a&&"32"!=a||t.reload()})),t.show=function(){try{if($("#md").hide(),$("#main").hide(),0!=mingyan.length){if(""!=qs("id"))var e=qs("id");else if(""!=location.hash&&"#search"!=location.hash)e=location.hash.replace("#","");else e=rdNum(0,mingyan.length-1);var a=mingyan[e].split("：")[0];if(2==mingyan[e].split("：").length)var n=mingyan[e].split("：")[1];else if(3==mingyan[e].split("：").length){n=mingyan[e].split("：")[1]+"："+mingyan[e].split("：")[2];console.log(n)}_hmt.push(["_trackEvent","名言","查看","自动",a+"："+n]),$("p#info").html('<div class="info-text"><a href="//'+location.hostname+location.pathname+"#"+e+'" class="label label-rounded label-warning">#'+e+"</a></br><a href=\"javascript:;\" onclick=\"my.reload();_hmt.push(['_trackEvent', '名言', '刷新', '手动' , '点击查看更多名言']);\" >点击</a>查看更多名言</div>"),$("span#mingyan").html(t.pic(a+"："+n)),$("span#name").text(a),$("#main").fadeIn();var i="名言 | "+n;document.title=i;var o=a+"曾经说过："+n;$('meta[name="description"]').attr("content",o),$('meta[property="og:description"]').attr("content",o),$('meta[name="og:description"]').attr("content",o),$('meta[property="og:title"]').attr("content",i),$('meta[name="og:title"]').attr("content",i),lazyload()}}catch(e){console.error(e),console.error("名言加载失败"),$("#mingyan").text("名言加载失败"),$("#info").html("错误信息：</br>"+e+'</br>建议：<a href="javascript:my.reload()">点我刷新页面</a>'),$("#main").fadeIn(),$("#info").fadeIn()}},"Mobile"!=ua.device){var inputbar_width="60%";$("#main").css("transform","translateY(15%)")}else{var inputbar_width="auto";$("#main").css("transform","translateY(30%)"),$("#md").css("transform","translateY(50px)")}t.PicMobie=function(){"Mobile"==ua.device?$("#main").css("transform","translateY(15%)"):$("#main").css("transform","translateY(10%)"),lazyload()},t.reload=function(){""!=location.hash?location.href="//"+location.hostname+":"+location.port+location.pathname:""==qs("id")&&""==qs("mail")||(location.href="//"+location.hostname+":"+location.port+location.pathname),t.show(),lazyload()},t.hide_showall=function(){$("#md").hide(),$("#showall").hide(),$("#main").fadeIn(),$("footer").html(footer),"#search"==location.hash&&(location.href="#")},t.all=function(){$("#md").hide(),$("#main").hide(),$("input#searchbar").val("");var e='<input style="'+inputbar_width+'" type="search" id="searchbar" placeholder="搜索……" results="5"></input></br></br><span class="e"></span>';for(i=0;i<mingyan.length;i++)e+='<div><a style="color:black" id="showall_item" class="'+i+'" href="./?id='+i+'">'+mingyan[i]+"</a></div>";e+="</br></br></br>",$("#showall").html(e),$("#showall").fadeIn(),$("footer").html("当前名言数量："+mingyan.length+'</br><a class="aline" href=javascript:; onclick="my.hide_showall()">返回</a>'),$("#searchbar").focus()},t.md=function(e,t){$(e).html('<strong><div style="text-align: center" class="mdui-ripple"><style>h1{font-size:30px}</style><h1>加载中……</h1></div></strong></br></br></br></br>'),$.get(t,(function(t){marked.setOptions({breaks:!0});var a=marked(t);a=a.replace(/<a /g,'<a target="_blank" '),$(e).html("<strong>"+a+"</strong></br></br></br></br>"),$(e).fadeIn()}))},t.more=function(){$("#main").hide(),$("#showall").hide(),t.md("#md","./src/md/more.md"),$("footer").html("当前名言数量："+mingyan.length+'</br><a class="aline" href=javascript:; onclick="my.hide_showall()">返回</a>'),$("#md").fadeIn()},t.about=function(){$("#md").hide(),$("#main").hide(),$("#showall").hide(),t.md("#md","./src/md/about.md"),$("#md").fadeIn(),$("footer").html("当前名言数量："+mingyan.length+'</br><a class="aline" href=javascript:; onclick="my.hide_showall()">返回</a>')},t.md_all=function(){$("#md").hide(),$("#main").hide(),$("#showall").hide();var e="";for(i=0;i<mingyan.length;i++)e+=mingyan[i]+"</br>";e+="</br></br></br></br>",$("#md").html(marked(e)),$("#md").fadeIn()},t.search=function(){if($("#searchbar").is(":focus"))if($("input#searchbar").val()){var now1=$("input#searchbar").val(),now2=$("input#searchbar").val();now1==now2&&($("a#showall_item").each((function(){if(-1!=$(this).text().indexOf($("input#searchbar").val())){var reg="/"+$("input#searchbar").val()+"/g";$(this).html($(this).text().replace(eval(reg),'<span class="label label-secondary">'+$("input#searchbar").val()+"</span>")),$(this).show()}else $(this).hide()})),$(".e").hide())}else $("a#showall_item").show(),$("a#showall_item").each((function(){$(this).html($(this).html().replace('<span class="label label-secondary">',"")),$(this).html($(this).html().replace("</span>",""))}));null!=$("#showall")[0].innerText.match(/^\s*$/)?($(".e").text("无结果"),$(".e").show()):$("#searchbar").is(":focus")&&$(".e").hide()},setInterval(t.search,100),qs("mail")&&(window.open("mailto:"+qs("mail").replace("---","@")),t.reload());var title=document.title,titleTime;document.addEventListener("visibilitychange",(function(){document.hidden?(document.title="名言 | 来看名言呀！",clearTimeout(titleTime)):document.title=title})),lazyload(),t.show()}(my);
